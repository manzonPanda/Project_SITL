// @version=5 
indicator("PROJECT SITL [JAKE]", max_lines_count=500, max_boxes_count=500, max_labels_count=500, overlay=true)

method timeSess(string timezone, string session) => time(timeframe.period, session, timezone) 
var tab  = table.new(position = position.top_right, columns = 1, rows = 1, bgcolor = color(color.rgb(2, 55, 124)), border_width = 1)

//Silver Bullet Periods
SB_AM_per = "America/New_York".timeSess("1000-1100") //period/session~The AM  Session Silver Bullet (10AM—11AM New York local time)10:00 - 11:00
SB_LN_per = "America/New_York".timeSess("0300-0400")//period/session~The London Open Silver Bullet (3AM—4AM New York local time)03:00 - 04:00
SB_PM_per = "America/New_York".timeSess("1400-1500") // period/session ~ The PM  Session Silver Bullet ( 2 PM —  3 PM New York local time)  14:00 - 15:00

col_SB      = input.color (#6c00d1f5,                '    '               , inline='SB' , group='Show'                        )  
minT        = syminfo.mintick

//-----------------------------------------------------------------------------}
//Variables
//-----------------------------------------------------------------------------{
tfs = (60 / (timeframe.in_seconds(timeframe.period) / 60)) / 2
is_in_SB  = SB_LN_per or SB_AM_per or SB_PM_per
strSB = is_in_SB  and not is_in_SB [1]
endSB  = not is_in_SB and is_in_SB [1]
bull_fvg = low > high[2] and close[1] > high[2]
bear_fvg = high < low[2] and close[1] < low[2]


if strSB
    line.new(bar_index, close, bar_index, close + 10, color= col_SB, extend=extend.both,width = 3)
if endSB
    line.new(bar_index, close, bar_index, close + 10, color= col_SB, extend=extend.both,width = 3)


plotchar(
 series     = not na(SB_LN_per) and na(SB_LN_per[1]),
 title      = "3-4 AM ",
 //char       = " ",
 location   =  location.top,
 color      = color.new(color = color.red , transp = 30),
 offset     = +tfs,
 text       = "3-4 AM\nNY\nBy Jake",
 textcolor  = color.new(color = color.purple , transp = 30)
 //editable   =  ,
 //size       =  ,
 //show_last  = ,
 //display    =  
 )


if barstate.islast
    if timeframe.in_seconds(timeframe.period) > 15 * 60
        true

table.cell(tab, 0, 0, text = 'Price: ' + str.tostring(close), text_color=#fcfcfc)

//-----------------------------------------------------------------------------}
//Set FVG
//-----------------------------------------------------------------------------{

//bullAreaCss      = input.color(color.new(color.teal, 50), 'Area'     , inline = 'bull')
//bullCss          = input.color(color.teal, 'FVG Level'               , inline = 'bull')
//n = bar_index
//bull_fvg = low > high[2] and close[1] > high[2]
//if bull_fvg
//    box.new(n +3, low, n, high[2], na, bgcolor = bullCss)


